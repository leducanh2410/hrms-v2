<div class="flex">
  <mat-drawer-container class="overflow-auto" autosize>
    <mat-drawer #drawer class="rounded-none" mode="side">
      <aside class="h-[90vh] overflow-auto bg-white">
        <p-tree
          (onNodeSelect)="onNodeSelect($event)"
          selectionMode="multiple"
          class="!border-0"
          [value]="dsPhongBan"
        ></p-tree>
      </aside>
    </mat-drawer>
  </mat-drawer-container>

  <div class="w-full">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <button type="button" mat-button (click)="drawer.toggle()" class="mx-2">
          <mat-icon>menu</mat-icon>
        </button>
        <mat-tab-group class="!m-0" (selectedIndexChange)="onTabChange($event)">
          <mat-tab label="NV đang làm việc"></mat-tab>
          <mat-tab label="NV nghỉ việc"></mat-tab>
        </mat-tab-group>
      </div>

      <div class="content my-2 px-2">
        <!-- <div class="buttons">
          <button
            mat-raised-button
            color="success"
            class="rounded-md mr-4 bg-gray-200 py-2 px-3 border border-collapse border-collapse-gray-300 hover:bg-gray-300"
          >
            <mat-icon class="align-middle mr-1 text-green-600"
              >add_circle</mat-icon
            >
            <span>Tạo mới</span>
          </button>
          <button
            mat-raised-button
            color="warn"
            class="rounded-md mr-4 bg-gray-200 py-2 px-3 border border-collapse-gray-300 hover:bg-gray-300"
          >
            <mat-icon class="align-middle mr-1">restore_from_trash</mat-icon>
            <span>Xóa</span>
          </button>
          <button
            mat-raised-button
            color="warning"
            class="rounded-md bg-gray-200 py-2 px-3 border border-collapse-gray-300 hover:bg-gray-300"
          >
            <mat-icon class="align-middle mr-1">settings</mat-icon>
            <span>Cấu hình cột</span>
          </button>
        </div> -->
      </div>
    </div>

    <div>
      <ng-container>
        <p-table
          [value]="filteredNhanVien"
          styleClass="w-full"
          [scrollable]="true"
          scrollHeight="80vh"
          class="overflow-x-auto"
          *ngIf="selectedTabIndex === 0"
        >
          <ng-template pTemplate="header" let-columns>
            <tr class="border border-collapse">
              <th
                class="text-left text-black font-bold border border-collapse min-w-[5%]"
              >
                <mat-checkbox class="example-margin"> </mat-checkbox>
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Tên NV
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Mã NV
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Phòng ban
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Chức danh
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Ngày vào làm
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                CCCD
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Thao tác
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-nsPhongBan let-i="rowIndex">
            <tr class="border border-collapse border-gray-200" #tableRow>
              <td
                class="text-left text-black font-bold border border-collapse w-[5%]"
              >
                <mat-checkbox class="example-margin"> </mat-checkbox>
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan?.employeeName }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan?.employeeCode }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ phongBanList[nsPhongBan.departmentId]?.departmentName }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan?.position }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan?.workingDay | date : "dd/MM/yyyy" }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan?.cccd }}
              </td>

              <td class="text-center min-w-[10%] border border-collapse">
                <button
                  class="text-2xl"
                  mat-icon-button
                  color="primary"
                  pTooltip="Xem/ sửa hồ sơ nhân sự"
                  tooltipPosition="left"
                  (click)="onNavigatorHsns(nsPhongBan)"
                >
                  <i class="fas fa-pencil-square text-blue-500"></i>
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
        <p-table
          [value]="filteredNhanVien"
          styleClass="w-full"
          [scrollable]="true"
          scrollHeight="80vh"
          class="overflow-x-auto"
          *ngIf="selectedTabIndex === 1"
        >
          <ng-template pTemplate="header" let-columns>
            <tr class="border border-collapse">
              <th
                class="text-left text-black font-bold border border-collapse min-w-[5%]"
              >
                <mat-checkbox class="example-margin"> </mat-checkbox>
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Tên NV
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Mã NV
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Phòng ban
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Chức danh
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Ngày vào làm
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                CCCD
              </th>
              <th
                class="text-left text-black font-bold border border-collapse min-w-[10%]"
              >
                Thao tác
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-nsPhongBan let-i="rowIndex">
            <tr class="border border-collapse border-gray-200" #tableRow>
              <td
                class="text-left text-black font-bold border border-collapse w-[5%]"
              >
                <mat-checkbox class="example-margin"> </mat-checkbox>
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan.employeeName }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan.employeeCode }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ phongBanList[nsPhongBan.departmentId]?.departmentName }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan.position }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan.workingDay | date : "dd/MM/yyyy" }}
              </td>
              <td class="min-w-[10%] border border-collapse">
                {{ nsPhongBan.cccd }}
              </td>

              <td class="text-center min-w-[10%] border border-collapse">
                <button
                  class="text-2xl"
                  mat-icon-button
                  color="primary"
                  pTooltip="Xem/ sửa hồ sơ nhân sự"
                  tooltipPosition="left"
                  (click)="onNavigatorHsns(nsPhongBan)"
                >
                  <i class="fas fa-pencil-square text-blue-500"></i>
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </ng-container>
    </div>
  </div>
</div>

<form name="registerForm" #registerForm="ngForm" (ngSubmit)="saveAndClose()"
    class="flex flex-col max-w-310 md:min-w-310 overflow-hidden max-h-screen -m-6">

    <!-- Header -->
    <div class="flex flex-0 items-center justify-between h-12 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary">
        <div class="text-lg font-medium head-modal">
            <span>Cập nhật kỷ luật</span>
        </div>
        <button type="button" mat-icon-button [tabIndex]="-1" (click)="close()">
            <i class="fa-light fa-xmark icon-size-5"></i>
        </button>
    </div>

    <div #mainns class="flex flex-col flex-auto h-modal max-h-200 overflow-y-auto">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-y-3 gap-x-8 w-full min-w-0 p-6 overflow-y-auto">
            <div class="flex flex-col justify-center sm:col-span-2">
                <app-chonquyetdinh [formName]="'quyetdinh'" [(quyetdinh)]="quyetdinh" [isDisableForm]="isLockform" [donviId]="data.nhansu.donviId" [(insertFile)]="insertFile"></app-chonquyetdinh>
            </div>

            <mat-form-field>
                <mat-label>Hình thức kỷ luật </mat-label>
                <mat-select [disabled]="isLockform" name="klId"  required [(ngModel)]="data.kyluat.klId">
                    <mat-option *ngFor="let item of listHthucKyLuat" [value]="item.id">
                        {{item.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label class=" sm:w-1/4 leading-none -mr-1">Thời gian kéo dài NLTX:</mat-label>
                <input matInput [disabled]="isLockform" placeholder="" name="tgkdnltx" [(ngModel)]="data.kyluat.tgkdnltx"
                    [ngModelOptions]="{standalone: true}" />
                <span matSuffix>(Tháng)</span>
            </mat-form-field>

            <mat-form-field>
                <mat-label class="">Ngày hiệu lực </mat-label>
                <input matInput [disabled]="isLockform" [matDatepicker]="ngayHieuluc" name="ngayHieuluc" [(ngModel)]="data.kyluat.ngayHieuluc"
                    [max]="maxDate" (dateInput)="startDate($event)" (dateChange)="startDate($event)"  required />
                <mat-datepicker-toggle matSuffix [for]="ngayHieuluc"></mat-datepicker-toggle>
                <mat-datepicker #ngayHieuluc></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-label class="">Ngày kết thúc </mat-label>
                <input matInput [disabled]="isLockform" [matDatepicker]="ngayketthuc" name="ngaysinh" [(ngModel)]="data.kyluat.ngayketthuc"
                    [min]="minDate" (dateInput)="endDate($event)" (dateChange)="endDate($event)"
                    [ngModelOptions]="{standalone: true}" />
                <mat-datepicker-toggle matSuffix [for]="ngayketthuc"></mat-datepicker-toggle>
                <mat-datepicker #ngayketthuc></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Lý do </mat-label>
                <input matInput [disabled]="isLockform" placeholder="" name="lydo" [(ngModel)]="data.kyluat.lydo"
                    [ngModelOptions]="{standalone: true}" />
            </mat-form-field>

            <mat-form-field>
                <mat-label>Mức phạt, đền bù </mat-label>
                <input matInput [disabled]="isLockform" placeholder="" name="mphat" [(ngModel)]="data.kyluat.mphat"
                    [ngModelOptions]="{standalone: true}" />
            </mat-form-field>


            <p-divider align="left" class="sm:col-span-2">
            </p-divider>

            <mat-checkbox name="duongchuc" [(ngModel)]="isQdXoaKluat" isQdXoaKluat>
                QĐ Xóa Kỷ luật(nếu có)
            </mat-checkbox>

            <div *ngIf="isQdXoaKluat" class="flex flex-col justify-center sm:col-span-2">
                <app-chonquyetdinh [formName]="'quyetdinhxoa'" [fieldRequired]="isQdXoaKluat" [(quyetdinh)]="quyetdinhxoa" [isDisableForm]="isLockform" [donviId]="data.nhansu.donviId" [(insertFile)]="insertFileXoa"></app-chonquyetdinh>
            </div>

        </div>
    </div>

    <div class="flex flex-0 items-center justify-end h-12 sm:pr-5 pl-6 sm:pl-8 mt-2 text-on-primary">
        <div mat-dialog-actions class="h-toolbar flex justify-end">
            <button type="submit" class="mx-1 button-green" mat-flat-button [disabled]="isLockform" >
                <i class="fa-light fa-check icon-size-5"></i>
                <span class="ml-2">Lưu</span>
            </button>
        </div>
    </div>
</form>
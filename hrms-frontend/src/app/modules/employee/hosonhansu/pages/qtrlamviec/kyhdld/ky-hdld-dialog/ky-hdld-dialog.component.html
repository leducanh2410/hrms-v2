<div class="flex flex-col max-h-screen -m-6 overflow-hidden w-200 lg:w-260   xl:w-290">
    <div class="flex items-center justify-between py-2 pl-6 pr-3 flex-0 sm:pr-5 sm:pl-8 bg-primary" mat-dialog-title>
        <div class="text-lg font-medium text-white head-modal">
            Cập nhật quá trình hợp đồng
        </div>
        <button mat-icon-button mat-dialog-close [tabIndex]="-1" (click)="close()">
            <i class="fa-light fa-xmark icon-size-5"></i>
        </button>
    </div>
    <div class="flex flex-col px-4 pt-4" mat-dialog-content>
        <form  id="hdldForm">

            <div class="flex items-center w-full mb-4">
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Số quyết định</mat-label>
                    <input matInput name="soQD" placeholder="" [(ngModel)]="quyetdinh.soQd"/>
                    <button class="mx-1 -mr-2" color="primary" mat-flat-button (click)="onChonQuyetDinh()">
                        <span class="ml-2">Chọn</span>
                    </button>
                </mat-form-field>
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Ngày ký</mat-label>
                    <input matInput [matDatepicker]="ngayKy" name="ngayKy" [(ngModel)]="quyetdinh.ngayKy" />
                    <mat-datepicker-toggle matSuffix [for]="ngayKy"></mat-datepicker-toggle>
                    <mat-datepicker #ngayKy></mat-datepicker>
                </mat-form-field>
            </div>

            <div class="flex items-center w-full mb-4">
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Người ký </mat-label>
                    <input name="nguoiky" matInput placeholder="Chọn người ký" (click)="onChonNgKy()" readonly [(ngModel)]="quyetdinh.nguoiky">   
                    <i *ngIf="quyetdinh.nguoiky" class="fa-light fa-xmark icon-size-5"
                        (click)="onDeleteNgKy()"></i>                 
                </mat-form-field>
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Chức vụ </mat-label>
                    <mat-select name="chucvu"  [(value)]="quyetdinh.chucvuKy" >
                        <mat-option *ngFor="let item of chucVuList"  [value]="item.name">
                        {{item.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="flex items-center w-full mb-4">
                <mat-form-field appearance="fill" class="fuse-mat-no-subscript w-full">
                    <mat-label class=" sm:w-1/4 leading-none -mr-1">Nội dung </mat-label>
                    <input matInput placeholder="" name="noiDung"  [(ngModel)]="quyetdinh.noiDung"  />
                </mat-form-field>
            </div>


            <div class="flex items-center w-full mb-4">
                <div class="mat-field-label">File quyết định:</div>
                <p-fileUpload #fileForm accept="image/*,.doc,.docx,.pdf,.xls,.xlsx" class="w-full text-base"
                    chooseLabel="Chọn" cancelLabel="Hủy" [customUpload]="true"
                    [maxFileSize]="102400000" 
                    (onSelect)="myUploader($event, fileForm)">
                    <ng-template pTemplate="content">
                        <div>
                            <div *ngIf="quyetdinh.fileAttach" class="flex items-center justify-between w-full md:w-auto mt-2">
                                <div class="fuse-mat-no-subscript w-2/5">
                                    <div class="mat-field-label truncate ">
                                        {{quyetdinh.fileName}}
                                    </div>
                                </div>
    
                                <div class="fuse-mat-no-subscript w-1/5">
                                    <div class="mat-field-label ">
                                        {{quyetdinh.fileSize}}
                                        bytes</div>
                                </div>
    
                                <div class="flex justify-end w-1/5">
                                    <!-- <p-button icon="pi pi-times" (click)></p-button> -->
                                    <button pButton icon="fa-light fa-trash-can" type="button"
                                        ></button>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                    <ng-template let-file pTemplate="file">
                        <div class="flex items-center justify-between w-full md:w-auto mt-2">
                            <div class="fuse-mat-no-subscript w-2/5">
                                <div class="mat-field-label truncate ">{{file.name}}</div>
                            </div>

                            <div class="fuse-mat-no-subscript w-1/5">
                                <div class="mat-field-label ">{{file.size}} bytes</div>
                            </div>

                            <div class="flex justify-end w-1/5">
                                <!-- <p-button icon="pi pi-times" (click)></p-button> -->
                                <button pButton icon="pi pi-times" type="button"
                                (click)="removeFile(file, fileForm, $event)"></button>
                            </div>
                        </div>
                    </ng-template>
                </p-fileUpload>
            </div>

            <div class="flex items-center w-full mb-4">    
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>Loại hợp đồng</mat-label>
                    <mat-select name="hopDong" [(value)]="hopDongSelected.loaiHD_ID" [(ngModel)]="hopDongSelected.loaiHD_ID" >
                        <mat-option *ngFor="let item of hopDongList"  [value]="item.id">
                        {{item.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>           
            </div>            

            <div class="flex items-center w-full">
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Ngày hiệu lực </mat-label>                    
                    <input matInput [matDatepicker]="ngaychinhthuc" name="ngaychinhthuc" [(ngModel)]="hopDongSelected.ngaychinhthuc"/>
                    <mat-datepicker-toggle matSuffix [for]="ngaychinhthuc"></mat-datepicker-toggle>
                    <mat-datepicker #ngaychinhthuc></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="fuse-mat-no-subscript w-2/4 mr-2">
                    <mat-label>Ngày hết hạn </mat-label>
                    <input matInput [matDatepicker]="ngayHH" name="ngayHH" [(ngModel)]="hopDongSelected.ngayhethan"/>
                    <mat-datepicker-toggle matSuffix [for]="ngayHH"></mat-datepicker-toggle>
                    <mat-datepicker #ngayHH></mat-datepicker>
                </mat-form-field>
            </div>


            <div class="flex items-center w-full">
                <mat-form-field appearance="fill" class="fuse-mat-no-subscript w-full">
                    <mat-label class=" sm:w-1/4 leading-none -mr-1">Công việc</mat-label>
                    <input matInput placeholder="" name="congViec"  [(ngModel)]="hopDongSelected.congviec"/>
                </mat-form-field>
            </div>

            <div class="flex items-center w-full">
                <mat-form-field appearance="fill" class="fuse-mat-no-subscript w-full">
                    <mat-label class=" sm:w-1/4 leading-none -mr-1">Nội dung khác</mat-label>
                    <input matInput placeholder="" name="noiDungKhac"  [(ngModel)]="hopDongSelected.noidungkhac"/>
                </mat-form-field>
            </div>
            


            <div class="flex items-center w-full ">
                <mat-checkbox matInput class="example-margin" color="primary" [checked]="hopDongSelected.isHientai">
                    <b>Là hợp đồng hiện tại</b>
                </mat-checkbox>
                <mat-checkbox matInput class="example-margin" color="primary" [checked]="hopDongSelected.koDongBHXH">
                    <b>Không đóng BHXH</b>
                </mat-checkbox>

            </div>

        </form>
    </div>

    <div mat-dialog-actions [align]="'end'" class="py-2 pr-6">        
        <button class="mx-1 button-green" mat-flat-button (click)="saveAndClose()">            
            <span class="ml-2">Lưu</span>
        </button>
        <button class="mx-1 button-red" mat-flat-button (click)="close()">            
            <span class="ml-2">Đóng</span>
        </button>
    </div>

</div>